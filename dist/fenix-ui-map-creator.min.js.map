{"version":3,"sources":["webpack:///fenix-ui-map-creator.min.js","webpack:///webpack/bootstrap bb4af4ae96d9e6fbee6d","webpack:///./src/js/index.js","webpack:///./src/config/config.js","webpack:///external \"jquery\"","webpack:///external \"loglevel\"","webpack:///./src/config/errors.js","webpack:///./src/config/events.js","webpack:///external \"underscore\"","webpack:///external \"fenix-ui-map\"","webpack:///external \"fenix-ui-pivotator\"","webpack:///external \"fenix-ui-pivotator-utils\"","webpack:///external \"amplify-pubsub\""],"names":["define","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_7__","__WEBPACK_EXTERNAL_MODULE_8__","__WEBPACK_EXTERNAL_MODULE_9__","__WEBPACK_EXTERNAL_MODULE_10__","__WEBPACK_EXTERNAL_MODULE_11__","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","$","_","log","ERR","EVT","C","FM","Pivotator","Fenixtool","amplify","MapCreator","o","info","extend","this","initial","_parseInput","fenix_ui_mapConfig","fenix_ui_map","valid","_validateInput","_initVariables","_bindEventListeners","_renderMap","error","prototype","on","channel","fn","context","_context","channels","push","callback","addBaseLayer","layer","fenixMap","addTileLayer","addLayer","model","L","TileLayer","map","errors","hasOwnProperty","metadata","createLayerFenixUid","createLayerFenixJoin","createLayerFenix","layertitle","legendtitle","removeLayer","status","ready","invalidateSize","$el","el","pc","aggregationFn","aggregations","hidden","columns","x","values","y","rows","series","formatter","valueOutputType","showRowHeaders","decimals","showCode","showFlag","showUnit","pivotatorConfig","window","fx_map_id","String","warn","length","code","MISSING_CONTAINER","pivotator","fenixTool","subscribe","_getEventName","WINDOW_RESIZE","self","Map","createMap","leafletMap","uid","setTimeout","bind","_trigger","args","Array","slice","arguments","i","l","subscription","apply","evt","concat","_unbindEventListeners","unsubscribe","dispose","destroyMap","empty","options","Error","layers","dsd","workspace","layerName","urlWMS","DEFAULT_WMS_SERVER","en","opacity","_validateJoinInput","getJoinLayer","join","style","defPopup","joincolumnlabel","joincolumn","lang","popupBuilder","customgfi","showpopup","content","EN","isFunction","codes","joindata","forEach","keys","key","isNumber","parseInt","zoomlayer","split","zoomTo","colorRamp","colorramp","geoColumn","valueColumn","muColumn","col","index","subject","geoSubject","valueSubject","muSubject","column","_validateJoinColumnInput","codelist","toLowerCase","layerMapping","idCodeList","referenceArea","getJoinData","measurementunit","console","data","geoColumnIndex","valueColumnIhdex","cachedValues","row","obj","value","dataType","Object","undefined","WMS_URL","url","wms","plugins","disclaimerfao","geosearch","mouseposition","controlloading","zoomcontrol","guiController","overlay","baselayer","wmsLoader","gui","leaflet","zoomControl","attributionControl","minZoom","gaul0","layertype","jointype","openlegend","defaultgfi","decimalvalues","escap_area","gaul1","uae_gaul","gaul_adm1","faostat_countrycodes","faostat_countries","gaul","uneca_partner","gaul1_afg","iso3","uneca_iso3"],"mappings":"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","file":"fenix-ui-map-creator.min.js","sourcesContent":["define([\"jquery\",\"loglevel\",\"underscore\",\"fenix-ui-map\",\"fenix-ui-pivotator\",\"fenix-ui-pivotator-utils\",\"amplify-pubsub\"], function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_10__, __WEBPACK_EXTERNAL_MODULE_11__) { return /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t    __webpack_require__(3),\r\n\t    __webpack_require__(7),\r\n\t    __webpack_require__(4),\r\n\t    __webpack_require__(5),\r\n\t    __webpack_require__(6),\r\n\t    __webpack_require__(2),\r\n\t    __webpack_require__(8),\r\n\t    __webpack_require__(9),\r\n\t    __webpack_require__(10),\r\n\t    __webpack_require__(11)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, _, log, ERR, EVT, C, FM, Pivotator, Fenixtool, amplify) {\r\n\t\r\n\t    'use strict';\r\n\t\r\n\t    function MapCreator(o) {\r\n\t\r\n\t        log.info(\"FENIX MapCreator\");\r\n\t        log.info(o);\r\n\t\r\n\t        _.extend(this, C, {initial: o});\r\n\t\r\n\t        this._parseInput(o);\r\n\t\r\n\t        this.fenix_ui_mapConfig = o.fenix_ui_map;\r\n\t\r\n\t        var valid = this._validateInput();\r\n\t\r\n\t        if (valid === true) {\r\n\t\r\n\t            this._initVariables();\r\n\t\r\n\t            this._bindEventListeners();\r\n\t\r\n\t            this._renderMap();\r\n\t\r\n\t            return this;\r\n\t\r\n\t        } else {\r\n\t            log.error(\"Impossible to create MapCreator\");\r\n\t            log.error(valid)\r\n\t        }\r\n\t\r\n\t    }\r\n\t\r\n\t    // API\r\n\t\r\n\t    /**\r\n\t     * pub/sub\r\n\t     * @return {Object} component instance\r\n\t     */\r\n\t    MapCreator.prototype.on = function (channel, fn, context) {\r\n\t        var _context = context || this;\r\n\t        if (!this.channels[channel]) {\r\n\t            this.channels[channel] = [];\r\n\t        }\r\n\t        this.channels[channel].push({context: _context, callback: fn});\r\n\t        return this;\r\n\t    };\r\n\t\r\n\t    /**\r\n\t     * Add a base layer to map\r\n\t     */\r\n\t    MapCreator.prototype.addBaseLayer = function (layer) {\r\n\t\r\n\t        this.fenixMap.addTileLayer(layer, true);\r\n\t\r\n\t        return this;\r\n\t    };\r\n\t    /**\r\n\t     * Add a layer to map\r\n\t     */\r\n\t    MapCreator.prototype.addLayer = function (model) {\r\n\t\r\n\t        var layer;\r\n\t\r\n\t        if (!model)\r\n\t            return false;\r\n\t\r\n\t        //support simple Leaflet layer\r\n\t        if (model instanceof L.TileLayer)\r\n\t            return this.fenixMap.map.addLayer(model);\r\n\t\r\n\t        // TODO: switch to check if it's a fenix layer\r\n\t        if (this.errors && (!model || !model.hasOwnProperty(\"metadata\") ))\r\n\t            this.errors.metadata = \"Model does not contain 'metadata' attribute.\";\r\n\t\r\n\t        if (typeof model === 'string')\r\n\t            layer = this.createLayerFenixUid(model);\r\n\t\r\n\t        else if (model.hasOwnProperty('data'))\r\n\t            layer = this.createLayerFenixJoin(model);\r\n\t\r\n\t        else\r\n\t            layer = this.createLayerFenix(model);\r\n\t\r\n\t        layer = new FM.layer(layer);\r\n\t\r\n\t        if (typeof model === 'object' && model['metadata'] && model['metadata']['title'] && model['metadata']['title']['EN'])\r\n\t            layer.layer.layertitle = model['metadata']['title']['EN'];\r\n\t\r\n\t        if (this.initial.legendtitle)\r\n\t            layer.layer.layertitle = this.initial.legendtitle;\r\n\t\r\n\t        this.fenixMap.addLayer(layer);\r\n\t\r\n\t        return layer;\r\n\t    };\r\n\t\r\n\t    /**\r\n\t     * Remove a layer from map\r\n\t     */\r\n\t    MapCreator.prototype.removeLayer = function (layer) {\r\n\t\r\n\t        if (this.status.ready !== true) {\r\n\t            return;\r\n\t        }\r\n\t\r\n\t        return this;\r\n\t    };\r\n\t\r\n\t    /**\r\n\t     * Invalidate map size\r\n\t     */\r\n\t    MapCreator.prototype.invalidateSize = function () {\r\n\t\r\n\t        if (this.status.ready !== true) {\r\n\t            return;\r\n\t        }\r\n\t\r\n\t        this.fenixMap.invalidateSize()\r\n\t\r\n\t        return this;\r\n\t    };\r\n\t\r\n\t    // end API\r\n\t\r\n\t    MapCreator.prototype._parseInput = function () {\r\n\t\r\n\t        this.id = this.initial.id;\r\n\t        this.$el = $(this.initial.el);\r\n\t        this.model = this.initial.model;\r\n\t\r\n\t        //pivotator config\r\n\t        var pc = {};\r\n\t\r\n\t        pc.aggregationFn = this.initial.aggregationFn;\r\n\t\r\n\t        pc.aggregations = this.initial.aggregations || [];\r\n\t        pc.hidden = this.initial.hidden || [];\r\n\t        pc.columns = this.initial.x;\r\n\t        pc.values = this.initial.y || [\"value\"];\r\n\t        pc.rows = this.initial.series;\r\n\t\r\n\t        pc.formatter = this.initial.formatter || \"value\";\r\n\t        pc.valueOutputType = this.initial.valueOutputType;\r\n\t        pc.showRowHeaders = this.initial.showRowHeaders || false;\r\n\t        pc.decimals = this.initial.decimals || 2;\r\n\t\r\n\t        pc.showCode = this.initial.showCode || false;\r\n\t        pc.showFlag = this.initial.showFlag || false;\r\n\t        pc.showUnit = this.initial.showUnit || false;\r\n\t\r\n\t        // add more pivotator config\r\n\t\r\n\t        this.pivotatorConfig = pc;\r\n\t\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype._validateInput = function () {\r\n\t\r\n\t        var valid = true,\r\n\t            errors = [];\r\n\t\r\n\t        //set MapCreator id\r\n\t        if (!this.id) {\r\n\t\r\n\t            window.fx_map_id >= 0 ? window.fx_map_id++ : window.fx_map_id = 0;\r\n\t            this.id = String(window.fx_map_id);\r\n\t            log.warn(\"Impossible to find MapCreator id. Set auto id to: \" + this.id);\r\n\t        }\r\n\t\r\n\t        //Check if $el exist\r\n\t        if (this.$el.length === 0) {\r\n\t            errors.push({code: ERR.MISSING_CONTAINER});\r\n\t            log.warn(\"Impossible to find box container\");\r\n\t        }\r\n\t\r\n\t        return errors.length > 0 ? errors : valid;\r\n\t\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype._initVariables = function () {\r\n\t\r\n\t        //pub/sub\r\n\t        this.channels = {};\r\n\t\r\n\t        this.status = {};\r\n\t        this.status.ready = false;\r\n\t\r\n\t        this.pivotator = new Pivotator();\r\n\t        this.fenixTool = new Fenixtool();\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype._bindEventListeners = function () {\r\n\t\r\n\t        amplify.subscribe(this._getEventName(EVT.WINDOW_RESIZE), this, this.invalidateSize);\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype._renderMap = function () {\r\n\t\r\n\t        var self = this;\r\n\t\r\n\t        //var myPivotatorConfig=this.fenixTool.parseInut(this.initial.model.metadata.dsd, this.pivotatorConfig);\r\n\t        //var model = this.pivotator.pivot(this.model, this.pivotatorConfig);\r\n\t\r\n\t        self.fenixMap = new FM.Map(self.$el, self.fenix_ui_mapConfig);\r\n\t        self.fenixMap.createMap();\r\n\t\r\n\t        self.leafletMap = self.fenixMap.map;\r\n\t\r\n\t        if (self.model) {\r\n\t            self.addLayer(self.model);\r\n\t        }\r\n\t        else if (this.initial.uid) {\r\n\t            self.addLayer(this.initial.uid);\r\n\t        }\r\n\t\r\n\t\r\n\t        //TODO bind to Leaflet whenReady\r\n\t        self.status.ready = true;  //To be set on map ready event\r\n\t\r\n\t        setTimeout(_.bind(function () {\r\n\t            self._trigger('ready');\r\n\t        }, self), 0);\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype._trigger = function (channel) {\r\n\t\r\n\t        if (!this.channels[channel]) {\r\n\t            return false;\r\n\t        }\r\n\t        var args = Array.prototype.slice.call(arguments, 1);\r\n\t        for (var i = 0, l = this.channels[channel].length; i < l; i++) {\r\n\t            var subscription = this.channels[channel][i];\r\n\t            subscription.callback.apply(subscription.context, args);\r\n\t        }\r\n\t\r\n\t        return this;\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype._getEventName = function (evt) {\r\n\t\r\n\t        return this.id.concat(evt);\r\n\t\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype._unbindEventListeners = function () {\r\n\t\r\n\t        amplify.unsubscribe(this._getEventName(EVT.WINDOW_RESIZE), this.invalidateSize);\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype.dispose = function () {\r\n\t\r\n\t        //unbind event listeners\r\n\t        this._unbindEventListeners();\r\n\t\r\n\t        if (this.status.ready === true) {\r\n\t            this.fenixMap.destroyMap();\r\n\t        }\r\n\t\r\n\t        this.$el.empty();\r\n\t\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype.createLayerFenix = function (model, options) {\r\n\t        var metadata = model.metadata;\r\n\t        var layer = {};\r\n\t        // Define the layer\r\n\t        if (metadata.hasOwnProperty(\"dsd\")) {\r\n\t            layer.layers = \"\";\r\n\t            if (metadata.dsd.hasOwnProperty(\"workspace\"))\r\n\t                layer.layers += metadata.dsd.workspace + \":\";\r\n\t\r\n\t            layer.layers += metadata.dsd.layerName;\r\n\t        }\r\n\t        else {\r\n\t            this.errors['dsd'] = \"Model['metadata'] does not contain 'dsd' attribute.\";\r\n\t            throw new Error(\"FENIX Map creator has not a valid configuration\");\r\n\t        }\r\n\t\r\n\t        //TODO\r\n\t        //if (model.hasOwnProperty(\"datasource\"))\r\n\t        //  layer.urlWMS = metadata[\"datasource\"];\r\n\t\r\n\t        layer.urlWMS = this.fenix_ui_map.DEFAULT_WMS_SERVER;\r\n\t        layer.layertitle = {\r\n\t            en: 'Data Layer'\r\n\t        };\r\n\t        layer.opacity = '0.9';\r\n\t        return layer;\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype.createLayerFenixUid = function (uid) {\r\n\t        var layer = {\r\n\t            urlWMS: this.DEFAULT_WMS_SERVER,\r\n\t            layertitle: {\r\n\t                en: 'Data Layer'\r\n\t            },\r\n\t            opacity: '0.9',\r\n\t            layers: uid\r\n\t        };\r\n\t        return layer;\r\n\t    };\r\n\t\r\n\t    // JOIN\r\n\t    MapCreator.prototype.createLayerFenixJoin = function (model) {\r\n\t\r\n\t        if (this._validateJoinInput(model) === true) {\r\n\t\r\n\t            // create the join layer\r\n\t            var layer = this.getJoinLayer(model);\r\n\t\r\n\t            _.extend(layer, this.join.style);\r\n\t\r\n\t            var defPopup = \"<div class='fm-popup'>{{\" + layer.joincolumnlabel + \"}}\" +\r\n\t                \"<div class='fm-popup-join-content'>{{{\" + layer.joincolumn + \"}}} \" +\r\n\t                \"{{measurementunit}}\" +\r\n\t                \"</div></div>\";\r\n\t\r\n\t\r\n\t            // Layer title TODO: Add title if exist (check in the validator)\r\n\t            if (model['metadata'].hasOwnProperty(\"title\")) {\r\n\t                if (model['metadata']['title'][this.lang]) {\r\n\t                    layer.layertitle = model['metadata']['title'][this.lang];\r\n\t                    //console.log('title',this.lang, layer.layertitle)\r\n\t                }\r\n\t            }\r\n\t            else {\r\n\t                layer.layertitle = model['metadata']['uid'];\r\n\t            }\r\n\t\r\n\t            // getting a title from the options\r\n\t            if (this.hasOwnProperty('layer') && this.layer.hasOwnProperty('layertitle')) {\r\n\t                layer.layertitle = this.layer.layertitle;\r\n\t            }\r\n\t\r\n\t            if (this.hasOwnProperty('layer') && this.layer.hasOwnProperty('popupBuilder')) {\r\n\t                layer.popupBuilder = this.layer.popupBuilder;\r\n\t            }\r\n\t\r\n\t            layer.customgfi = {\r\n\t                showpopup: true,\r\n\t                content: {\r\n\t                    EN: _.isFunction(layer.popupBuilder) ? layer.popupBuilder(layer.joincolumnlabel, layer.joincolumn) : defPopup\r\n\t                }\r\n\t            };\r\n\t\r\n\t            // TODO: add check on the zoomto data (move it to a function)\r\n\t            var codes = [];\r\n\t            layer.joindata.forEach(function (code) {\r\n\t                _.keys(code).forEach(function (key) {\r\n\t                    if (_.isNumber(parseInt(key)))\r\n\t                        codes.push(key);\r\n\t                });\r\n\t            });\r\n\t\r\n\t            var zoomlayer = layer.layers.split(\":\");\r\n\t\r\n\t            zoomlayer = zoomlayer.length > 1 ? zoomlayer[1] : zoomlayer[0];\r\n\t\r\n\t            this.fenixMap.zoomTo(zoomlayer, layer.joincolumn, codes);\r\n\t\r\n\t            if (this.initial.colorRamp)\r\n\t                layer.colorramp = this.initial.colorRamp;\r\n\t\r\n\t            return layer;\r\n\t\r\n\t        } else {\r\n\t            //console.error(this.errors);\r\n\t            //throw new Error(\"FENIX Map creator has not a valid JOIN configuration\");\r\n\t        }\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype.getJoinLayer = function (model) {\r\n\t\r\n\t        var metadata = model['metadata'],\r\n\t            geoColumn = {},\r\n\t            valueColumn = {},\r\n\t            muColumn = {};\r\n\t\r\n\t        metadata['dsd']['columns'].forEach(_.bind(function (col, index) {\r\n\t            if (col.subject === this.geoSubject || col.id === this.geoSubject) {\r\n\t                geoColumn = col;\r\n\t                geoColumn.index = index;\r\n\t            }\r\n\t            if (col.subject === this.valueSubject || col.id === this.valueSubject) {\r\n\t                valueColumn = col;\r\n\t                valueColumn.index = index;\r\n\t            }\r\n\t            if (col.subject === this.muSubject) {\r\n\t                muColumn = col;\r\n\t                muColumn.index = index;\r\n\t            }\r\n\t        }, this));\r\n\t\r\n\t        // getting the right measurement unit if the new label exists\r\n\t        metadata['dsd']['columns'].forEach(_.bind(function (column, index) {\r\n\t            if (muColumn.id + '_' + this.lang) {\r\n\t                muColumn = column;\r\n\t                muColumn.index = index;\r\n\t            }\r\n\t        }, this));\r\n\t\r\n\t\r\n\t        if (this._validateJoinColumnInput(geoColumn)) {\r\n\t\r\n\t\r\n\t            var layer = null;\r\n\t            var codelist = geoColumn['domain']['codes'][0]['idCodeList'].toLowerCase();\r\n\t\r\n\t            if (this.join.layerMapping[codelist]) {\r\n\t                layer = this.join.layerMapping[codelist];\r\n\t            }\r\n\t            else {\r\n\t                geoColumn['domain']['codes'][0].idCodeList.toLowerCase();\r\n\t                // TODO: Handle reference Area\r\n\t                var referenceArea = metadata[\"meContent\"][\"seReferencePopulation\"][\"referenceArea\"]['codes'][0].code.toLowerCase();\r\n\t                layer = this.join.layerMapping[codelist + \"_\" + referenceArea];\r\n\t            }\r\n\t\r\n\t            // check measurementunit\r\n\t            // TODO: Add measurement unit to the layer definition (using label column of the mu)\r\n\t\r\n\t            // get joinData\r\n\t            layer.joindata = this.getJoinData(model['data'], geoColumn.index, valueColumn.index);\r\n\t\r\n\t            // TODO: check on the column index\r\n\t            layer.measurementunit = model['data'][0][muColumn.index];\r\n\t\r\n\t            // TODO: check if is the right legendtitle\r\n\t            layer.legendtitle = layer.measurementunit;\r\n\t\r\n\t            layer.layertitle = 'OCD';\r\n\t            //layer.legendtitle = 'ODA';\r\n\t\r\n\t            return layer;\r\n\t\r\n\t        } else {\r\n\t            console.error('Error JoinColumnInput not valid')\r\n\t        }\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype.getJoinData = function (data, geoColumnIndex, valueColumnIhdex) {\r\n\t        var joindata = [];\r\n\t\r\n\t        // TODO: remove cachedValues on final version. Check on join data consistency?\r\n\t        var cachedValues = {}\r\n\t        // TODO: add on check\r\n\t        data.forEach(_.bind(function (row) {\r\n\t            var obj = {}\r\n\t            var code = row[geoColumnIndex];\r\n\t            var value = row[valueColumnIhdex];\r\n\t            if (code && value) {\r\n\t                obj[code] = value;\r\n\t                if (!cachedValues.hasOwnProperty(code)) {\r\n\t                    // check null values\r\n\t                    cachedValues[code] = true;\r\n\t                    joindata.push(obj);\r\n\t                }\r\n\t            }\r\n\t        }, this));\r\n\t\r\n\t        return joindata;\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype._validateJoinInput = function (model) {\r\n\t        this.errors = {};\r\n\t\r\n\t        //Metadata TODO: add all metadata checks\r\n\t        if (!model.hasOwnProperty(\"metadata\")) {\r\n\t            this.errors.metadata = \"'metadata' attribute not present.\";\r\n\t        }\r\n\t\r\n\t        //Data\r\n\t        if (!model.hasOwnProperty(\"data\")) {\r\n\t            this.errors.data = \"'data' attribute not present.\";\r\n\t        }\r\n\t\r\n\t        return (_.keys(this.errors).length === 0);\r\n\t    };\r\n\t\r\n\t    MapCreator.prototype._validateJoinColumnInput = function (column) {\r\n\t        this.errors = {};\r\n\t\r\n\t        //Metadata TODO: add all metadata checks\r\n\t        if (!column.hasOwnProperty('key')) {\r\n\t            this.errors.column = \"'key' attribute not present.\";\r\n\t        }\r\n\t        else {\r\n\t            if (column.key !== true) {\r\n\t                this.errors.column = \"'key' is not true.\";\r\n\t            }\r\n\t        }\r\n\t\r\n\t        if (!column.hasOwnProperty('dataType')) {\r\n\t            this.errors.column = \"'dataType' attribute not present.\";\r\n\t        }\r\n\t        else {\r\n\t            if (column.dataType !== 'code') {\r\n\t                this.errors.column = \"'dataType' attribute is not a coding system.\";\r\n\t            }\r\n\t        }\r\n\t\r\n\t        // TODO: check domain and referencearea if needed\r\n\t\r\n\t        return (Object.keys(this.errors).length === 0);\r\n\t    };\r\n\t\r\n\t    return MapCreator;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\r\n\t\r\n\t    'use strict';\r\n\t\r\n\t    return {\r\n\t        WMS_URL: \"http://fenix.fao.org/demo/fenix/geoserver\",\r\n\t        DEFAULT_WMS_SERVER: \"http://fenix.fao.org/demo/fenix/geoserver\",\r\n\t        url: {\r\n\t            wms: \"http://fenix.fao.org/demo/fenix/geoserver\"\r\n\t        },        \r\n\t        fenix_ui_map: {\r\n\t            plugins: {\r\n\t                disclaimerfao: true,\r\n\t                geosearch: true,\r\n\t                mouseposition: false,\r\n\t                controlloading : true,\r\n\t                zoomcontrol: 'bottomright'\r\n\t            },\r\n\t            guiController: {\r\n\t                overlay: false,\r\n\t                baselayer: true,\r\n\t                wmsLoader: false\r\n\t            },\r\n\t            gui: {\r\n\t                disclaimerfao: true\r\n\t            }\r\n\t        },\r\n\t        leaflet: {\r\n\t            zoomControl: false,\r\n\t            attributionControl: false,\r\n\t            minZoom: 1\r\n\t        },\r\n\t        layers: {\r\n\t            gaul0: {\r\n\t                layers: 'fenix:gaul0_3857',\r\n\t                urlWMS: 'http://fenix.fao.org/demo/fenix/geoserver',\r\n\t                opacity: '0.9',\r\n\t                joincolumn: 'adm0_code',\r\n\t                joincolumnlabel: 'areanamee',\r\n\t                layertype: 'JOIN',\r\n\t                jointype: 'shaded',\r\n\t                openlegend: true,\r\n\t                defaultgfi: true,\r\n\t                colorramp: 'YlGn',\r\n\t                lang: 'en'\r\n\t            }\r\n\t        },\r\n\t        geoSubject: 'geo',\r\n\t        colorRamp: 'Reds',  //Blues, Greens,\r\n\t        //colorRamp values: http://fenixrepo.fao.org/cdn/fenix/fenix-ui-map-datasets/colorramp.png        \r\n\t\r\n\t        valueSubject: 'value',\r\n\t        // measurement unit\r\n\t        muSubject: null,\r\n\t\r\n\t        // Mapping with the\r\n\t        join: {\r\n\t            style: {\r\n\t                layertype: 'JOIN',\r\n\t                jointype: 'shaded',\r\n\t                defaultgfi: true,\r\n\t                openlegend: true,\r\n\t                lang: 'EN',\r\n\t                opacity: '0.7',\r\n\t                colorramp: 'Greens',\r\n\t                decimalvalues: 2\r\n\t            },\r\n\t            layerMapping: {\r\n\t                escap_area: {\r\n\t                    layers: 'fenix:gaul0_3857',\r\n\t                    joincolumn: 'adm0_code',\r\n\t                    joincolumnlabel: 'adm0_name'\r\n\t                },\r\n\t                gaul0: {\r\n\t                    layers: 'fenix:gaul0_3857',\r\n\t                    joincolumn: 'adm0_code',\r\n\t                    joincolumnlabel: 'adm0_name'\r\n\t                },\r\n\t                gaul1: {\r\n\t                    layers: 'fenix:gaul1_3857',\r\n\t                    joincolumn: 'adm1_code',\r\n\t                    joincolumnlabel: 'adm1_name'\r\n\t                },\r\n\t                uae_gaul: {\r\n\t                    layers: 'fenix:gaul1_3857',\r\n\t                    joincolumn: 'adm1_code',\r\n\t                    joincolumnlabel: 'adm1_name'\r\n\t                },\r\n\t\r\n\t                gaul_adm1: {\r\n\t                    layers: 'fenix:gaul1_3857',\r\n\t                    joincolumn: 'adm1_code',\r\n\t                    joincolumnlabel: 'adm1_name'\r\n\t                },\r\n\t\r\n\t                faostat_countrycodes: {\r\n\t                    layers: 'fenix:gaul0_faostat_3857',\r\n\t                    joincolumn: 'faost_code',\r\n\t                    joincolumnlabel: 'areanamee',\r\n\t                },\r\n\t                faostat_countries: {\r\n\t                    layers: 'fenix:gaul0_faostat_3857',\r\n\t                    joincolumn: 'faost_code',\r\n\t                    joincolumnlabel: 'areanamee',\r\n\t                },\r\n\t                gaul: {\r\n\t                    layers: 'fenix:gaul1_3857',\r\n\t                    joincolumn: 'adm1_code',\r\n\t                    joincolumnlabel: 'adm1_name'\r\n\t                },\r\n\t                uneca_partner: {\r\n\t                    layers: 'fenix:gaul0_faostat3_3857',\r\n\t                    joincolumn: 'iso3',\r\n\t                    joincolumnlabel: 'areanamee'\r\n\t                },\r\n\t                gaul1_afg: {\r\n\t                    layers: 'fenix:gaul1_3857',\r\n\t                    joincolumn: 'adm1_code',\r\n\t                    joincolumnlabel: 'adm1_name'\r\n\t                },\r\n\t                iso3: {\r\n\t                    layers: 'fenix:gaul0_faostat3_3857',\r\n\t                    joincolumn: 'iso3',\r\n\t                    joincolumnlabel: 'areanamee'\r\n\t                },\r\n\t                uneca_iso3: {\r\n\t                    layers: 'fenix:gaul0_faostat3_3857',\r\n\t                    joincolumn: 'iso3',\r\n\t                    joincolumnlabel: 'areanamee'\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        // TODO: add boundaries option\r\n\t    };\r\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\r\n\t\r\n\t    'use strict';\r\n\t\r\n\t    return {\r\n\t\r\n\t        MISSING_CONTAINER: 'missing_container'\r\n\t\r\n\t    };\r\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\r\n\t\r\n\t    'use strict';\r\n\t\r\n\t    return {\r\n\t\r\n\t        WINDOW_RESIZE: 'fs.window.resize.event'\r\n\t\r\n\t    };\r\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n/***/ }\n/******/ ])});;\n\n\n/** WEBPACK FOOTER **\n ** fenix-ui-map-creator.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap bb4af4ae96d9e6fbee6d\n **/","define([\r\n    'jquery',\r\n    'underscore',\r\n    'loglevel',\r\n    '../config/errors',\r\n    '../config/events',\r\n    '../config/config',\r\n    'fenix-ui-map',\r\n    'fenix-ui-pivotator',\r\n    'fenix-ui-pivotator-utils',\r\n    'amplify-pubsub'\r\n], function ($, _, log, ERR, EVT, C, FM, Pivotator, Fenixtool, amplify) {\r\n\r\n    'use strict';\r\n\r\n    function MapCreator(o) {\r\n\r\n        log.info(\"FENIX MapCreator\");\r\n        log.info(o);\r\n\r\n        _.extend(this, C, {initial: o});\r\n\r\n        this._parseInput(o);\r\n\r\n        this.fenix_ui_mapConfig = o.fenix_ui_map;\r\n\r\n        var valid = this._validateInput();\r\n\r\n        if (valid === true) {\r\n\r\n            this._initVariables();\r\n\r\n            this._bindEventListeners();\r\n\r\n            this._renderMap();\r\n\r\n            return this;\r\n\r\n        } else {\r\n            log.error(\"Impossible to create MapCreator\");\r\n            log.error(valid)\r\n        }\r\n\r\n    }\r\n\r\n    // API\r\n\r\n    /**\r\n     * pub/sub\r\n     * @return {Object} component instance\r\n     */\r\n    MapCreator.prototype.on = function (channel, fn, context) {\r\n        var _context = context || this;\r\n        if (!this.channels[channel]) {\r\n            this.channels[channel] = [];\r\n        }\r\n        this.channels[channel].push({context: _context, callback: fn});\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Add a base layer to map\r\n     */\r\n    MapCreator.prototype.addBaseLayer = function (layer) {\r\n\r\n        this.fenixMap.addTileLayer(layer, true);\r\n\r\n        return this;\r\n    };\r\n    /**\r\n     * Add a layer to map\r\n     */\r\n    MapCreator.prototype.addLayer = function (model) {\r\n\r\n        var layer;\r\n\r\n        if (!model)\r\n            return false;\r\n\r\n        //support simple Leaflet layer\r\n        if (model instanceof L.TileLayer)\r\n            return this.fenixMap.map.addLayer(model);\r\n\r\n        // TODO: switch to check if it's a fenix layer\r\n        if (this.errors && (!model || !model.hasOwnProperty(\"metadata\") ))\r\n            this.errors.metadata = \"Model does not contain 'metadata' attribute.\";\r\n\r\n        if (typeof model === 'string')\r\n            layer = this.createLayerFenixUid(model);\r\n\r\n        else if (model.hasOwnProperty('data'))\r\n            layer = this.createLayerFenixJoin(model);\r\n\r\n        else\r\n            layer = this.createLayerFenix(model);\r\n\r\n        layer = new FM.layer(layer);\r\n\r\n        if (typeof model === 'object' && model['metadata'] && model['metadata']['title'] && model['metadata']['title']['EN'])\r\n            layer.layer.layertitle = model['metadata']['title']['EN'];\r\n\r\n        if (this.initial.legendtitle)\r\n            layer.layer.layertitle = this.initial.legendtitle;\r\n\r\n        this.fenixMap.addLayer(layer);\r\n\r\n        return layer;\r\n    };\r\n\r\n    /**\r\n     * Remove a layer from map\r\n     */\r\n    MapCreator.prototype.removeLayer = function (layer) {\r\n\r\n        if (this.status.ready !== true) {\r\n            return;\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Invalidate map size\r\n     */\r\n    MapCreator.prototype.invalidateSize = function () {\r\n\r\n        if (this.status.ready !== true) {\r\n            return;\r\n        }\r\n\r\n        this.fenixMap.invalidateSize()\r\n\r\n        return this;\r\n    };\r\n\r\n    // end API\r\n\r\n    MapCreator.prototype._parseInput = function () {\r\n\r\n        this.id = this.initial.id;\r\n        this.$el = $(this.initial.el);\r\n        this.model = this.initial.model;\r\n\r\n        //pivotator config\r\n        var pc = {};\r\n\r\n        pc.aggregationFn = this.initial.aggregationFn;\r\n\r\n        pc.aggregations = this.initial.aggregations || [];\r\n        pc.hidden = this.initial.hidden || [];\r\n        pc.columns = this.initial.x;\r\n        pc.values = this.initial.y || [\"value\"];\r\n        pc.rows = this.initial.series;\r\n\r\n        pc.formatter = this.initial.formatter || \"value\";\r\n        pc.valueOutputType = this.initial.valueOutputType;\r\n        pc.showRowHeaders = this.initial.showRowHeaders || false;\r\n        pc.decimals = this.initial.decimals || 2;\r\n\r\n        pc.showCode = this.initial.showCode || false;\r\n        pc.showFlag = this.initial.showFlag || false;\r\n        pc.showUnit = this.initial.showUnit || false;\r\n\r\n        // add more pivotator config\r\n\r\n        this.pivotatorConfig = pc;\r\n\r\n    };\r\n\r\n    MapCreator.prototype._validateInput = function () {\r\n\r\n        var valid = true,\r\n            errors = [];\r\n\r\n        //set MapCreator id\r\n        if (!this.id) {\r\n\r\n            window.fx_map_id >= 0 ? window.fx_map_id++ : window.fx_map_id = 0;\r\n            this.id = String(window.fx_map_id);\r\n            log.warn(\"Impossible to find MapCreator id. Set auto id to: \" + this.id);\r\n        }\r\n\r\n        //Check if $el exist\r\n        if (this.$el.length === 0) {\r\n            errors.push({code: ERR.MISSING_CONTAINER});\r\n            log.warn(\"Impossible to find box container\");\r\n        }\r\n\r\n        return errors.length > 0 ? errors : valid;\r\n\r\n    };\r\n\r\n    MapCreator.prototype._initVariables = function () {\r\n\r\n        //pub/sub\r\n        this.channels = {};\r\n\r\n        this.status = {};\r\n        this.status.ready = false;\r\n\r\n        this.pivotator = new Pivotator();\r\n        this.fenixTool = new Fenixtool();\r\n    };\r\n\r\n    MapCreator.prototype._bindEventListeners = function () {\r\n\r\n        amplify.subscribe(this._getEventName(EVT.WINDOW_RESIZE), this, this.invalidateSize);\r\n    };\r\n\r\n    MapCreator.prototype._renderMap = function () {\r\n\r\n        var self = this;\r\n\r\n        //var myPivotatorConfig=this.fenixTool.parseInut(this.initial.model.metadata.dsd, this.pivotatorConfig);\r\n        //var model = this.pivotator.pivot(this.model, this.pivotatorConfig);\r\n\r\n        self.fenixMap = new FM.Map(self.$el, self.fenix_ui_mapConfig);\r\n        self.fenixMap.createMap();\r\n\r\n        self.leafletMap = self.fenixMap.map;\r\n\r\n        if (self.model) {\r\n            self.addLayer(self.model);\r\n        }\r\n        else if (this.initial.uid) {\r\n            self.addLayer(this.initial.uid);\r\n        }\r\n\r\n\r\n        //TODO bind to Leaflet whenReady\r\n        self.status.ready = true;  //To be set on map ready event\r\n\r\n        setTimeout(_.bind(function () {\r\n            self._trigger('ready');\r\n        }, self), 0);\r\n    };\r\n\r\n    MapCreator.prototype._trigger = function (channel) {\r\n\r\n        if (!this.channels[channel]) {\r\n            return false;\r\n        }\r\n        var args = Array.prototype.slice.call(arguments, 1);\r\n        for (var i = 0, l = this.channels[channel].length; i < l; i++) {\r\n            var subscription = this.channels[channel][i];\r\n            subscription.callback.apply(subscription.context, args);\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n    MapCreator.prototype._getEventName = function (evt) {\r\n\r\n        return this.id.concat(evt);\r\n\r\n    };\r\n\r\n    MapCreator.prototype._unbindEventListeners = function () {\r\n\r\n        amplify.unsubscribe(this._getEventName(EVT.WINDOW_RESIZE), this.invalidateSize);\r\n    };\r\n\r\n    MapCreator.prototype.dispose = function () {\r\n\r\n        //unbind event listeners\r\n        this._unbindEventListeners();\r\n\r\n        if (this.status.ready === true) {\r\n            this.fenixMap.destroyMap();\r\n        }\r\n\r\n        this.$el.empty();\r\n\r\n    };\r\n\r\n    MapCreator.prototype.createLayerFenix = function (model, options) {\r\n        var metadata = model.metadata;\r\n        var layer = {};\r\n        // Define the layer\r\n        if (metadata.hasOwnProperty(\"dsd\")) {\r\n            layer.layers = \"\";\r\n            if (metadata.dsd.hasOwnProperty(\"workspace\"))\r\n                layer.layers += metadata.dsd.workspace + \":\";\r\n\r\n            layer.layers += metadata.dsd.layerName;\r\n        }\r\n        else {\r\n            this.errors['dsd'] = \"Model['metadata'] does not contain 'dsd' attribute.\";\r\n            throw new Error(\"FENIX Map creator has not a valid configuration\");\r\n        }\r\n\r\n        //TODO\r\n        //if (model.hasOwnProperty(\"datasource\"))\r\n        //  layer.urlWMS = metadata[\"datasource\"];\r\n\r\n        layer.urlWMS = this.fenix_ui_map.DEFAULT_WMS_SERVER;\r\n        layer.layertitle = {\r\n            en: 'Data Layer'\r\n        };\r\n        layer.opacity = '0.9';\r\n        return layer;\r\n    };\r\n\r\n    MapCreator.prototype.createLayerFenixUid = function (uid) {\r\n        var layer = {\r\n            urlWMS: this.DEFAULT_WMS_SERVER,\r\n            layertitle: {\r\n                en: 'Data Layer'\r\n            },\r\n            opacity: '0.9',\r\n            layers: uid\r\n        };\r\n        return layer;\r\n    };\r\n\r\n    // JOIN\r\n    MapCreator.prototype.createLayerFenixJoin = function (model) {\r\n\r\n        if (this._validateJoinInput(model) === true) {\r\n\r\n            // create the join layer\r\n            var layer = this.getJoinLayer(model);\r\n\r\n            _.extend(layer, this.join.style);\r\n\r\n            var defPopup = \"<div class='fm-popup'>{{\" + layer.joincolumnlabel + \"}}\" +\r\n                \"<div class='fm-popup-join-content'>{{{\" + layer.joincolumn + \"}}} \" +\r\n                \"{{measurementunit}}\" +\r\n                \"</div></div>\";\r\n\r\n\r\n            // Layer title TODO: Add title if exist (check in the validator)\r\n            if (model['metadata'].hasOwnProperty(\"title\")) {\r\n                if (model['metadata']['title'][this.lang]) {\r\n                    layer.layertitle = model['metadata']['title'][this.lang];\r\n                    //console.log('title',this.lang, layer.layertitle)\r\n                }\r\n            }\r\n            else {\r\n                layer.layertitle = model['metadata']['uid'];\r\n            }\r\n\r\n            // getting a title from the options\r\n            if (this.hasOwnProperty('layer') && this.layer.hasOwnProperty('layertitle')) {\r\n                layer.layertitle = this.layer.layertitle;\r\n            }\r\n\r\n            if (this.hasOwnProperty('layer') && this.layer.hasOwnProperty('popupBuilder')) {\r\n                layer.popupBuilder = this.layer.popupBuilder;\r\n            }\r\n\r\n            layer.customgfi = {\r\n                showpopup: true,\r\n                content: {\r\n                    EN: _.isFunction(layer.popupBuilder) ? layer.popupBuilder(layer.joincolumnlabel, layer.joincolumn) : defPopup\r\n                }\r\n            };\r\n\r\n            // TODO: add check on the zoomto data (move it to a function)\r\n            var codes = [];\r\n            layer.joindata.forEach(function (code) {\r\n                _.keys(code).forEach(function (key) {\r\n                    if (_.isNumber(parseInt(key)))\r\n                        codes.push(key);\r\n                });\r\n            });\r\n\r\n            var zoomlayer = layer.layers.split(\":\");\r\n\r\n            zoomlayer = zoomlayer.length > 1 ? zoomlayer[1] : zoomlayer[0];\r\n\r\n            this.fenixMap.zoomTo(zoomlayer, layer.joincolumn, codes);\r\n\r\n            if (this.initial.colorRamp)\r\n                layer.colorramp = this.initial.colorRamp;\r\n\r\n            return layer;\r\n\r\n        } else {\r\n            //console.error(this.errors);\r\n            //throw new Error(\"FENIX Map creator has not a valid JOIN configuration\");\r\n        }\r\n    };\r\n\r\n    MapCreator.prototype.getJoinLayer = function (model) {\r\n\r\n        var metadata = model['metadata'],\r\n            geoColumn = {},\r\n            valueColumn = {},\r\n            muColumn = {};\r\n\r\n        metadata['dsd']['columns'].forEach(_.bind(function (col, index) {\r\n            if (col.subject === this.geoSubject || col.id === this.geoSubject) {\r\n                geoColumn = col;\r\n                geoColumn.index = index;\r\n            }\r\n            if (col.subject === this.valueSubject || col.id === this.valueSubject) {\r\n                valueColumn = col;\r\n                valueColumn.index = index;\r\n            }\r\n            if (col.subject === this.muSubject) {\r\n                muColumn = col;\r\n                muColumn.index = index;\r\n            }\r\n        }, this));\r\n\r\n        // getting the right measurement unit if the new label exists\r\n        metadata['dsd']['columns'].forEach(_.bind(function (column, index) {\r\n            if (muColumn.id + '_' + this.lang) {\r\n                muColumn = column;\r\n                muColumn.index = index;\r\n            }\r\n        }, this));\r\n\r\n\r\n        if (this._validateJoinColumnInput(geoColumn)) {\r\n\r\n\r\n            var layer = null;\r\n            var codelist = geoColumn['domain']['codes'][0]['idCodeList'].toLowerCase();\r\n\r\n            if (this.join.layerMapping[codelist]) {\r\n                layer = this.join.layerMapping[codelist];\r\n            }\r\n            else {\r\n                geoColumn['domain']['codes'][0].idCodeList.toLowerCase();\r\n                // TODO: Handle reference Area\r\n                var referenceArea = metadata[\"meContent\"][\"seReferencePopulation\"][\"referenceArea\"]['codes'][0].code.toLowerCase();\r\n                layer = this.join.layerMapping[codelist + \"_\" + referenceArea];\r\n            }\r\n\r\n            // check measurementunit\r\n            // TODO: Add measurement unit to the layer definition (using label column of the mu)\r\n\r\n            // get joinData\r\n            layer.joindata = this.getJoinData(model['data'], geoColumn.index, valueColumn.index);\r\n\r\n            // TODO: check on the column index\r\n            layer.measurementunit = model['data'][0][muColumn.index];\r\n\r\n            // TODO: check if is the right legendtitle\r\n            layer.legendtitle = layer.measurementunit;\r\n\r\n            layer.layertitle = 'OCD';\r\n            //layer.legendtitle = 'ODA';\r\n\r\n            return layer;\r\n\r\n        } else {\r\n            console.error('Error JoinColumnInput not valid')\r\n        }\r\n    };\r\n\r\n    MapCreator.prototype.getJoinData = function (data, geoColumnIndex, valueColumnIhdex) {\r\n        var joindata = [];\r\n\r\n        // TODO: remove cachedValues on final version. Check on join data consistency?\r\n        var cachedValues = {}\r\n        // TODO: add on check\r\n        data.forEach(_.bind(function (row) {\r\n            var obj = {}\r\n            var code = row[geoColumnIndex];\r\n            var value = row[valueColumnIhdex];\r\n            if (code && value) {\r\n                obj[code] = value;\r\n                if (!cachedValues.hasOwnProperty(code)) {\r\n                    // check null values\r\n                    cachedValues[code] = true;\r\n                    joindata.push(obj);\r\n                }\r\n            }\r\n        }, this));\r\n\r\n        return joindata;\r\n    };\r\n\r\n    MapCreator.prototype._validateJoinInput = function (model) {\r\n        this.errors = {};\r\n\r\n        //Metadata TODO: add all metadata checks\r\n        if (!model.hasOwnProperty(\"metadata\")) {\r\n            this.errors.metadata = \"'metadata' attribute not present.\";\r\n        }\r\n\r\n        //Data\r\n        if (!model.hasOwnProperty(\"data\")) {\r\n            this.errors.data = \"'data' attribute not present.\";\r\n        }\r\n\r\n        return (_.keys(this.errors).length === 0);\r\n    };\r\n\r\n    MapCreator.prototype._validateJoinColumnInput = function (column) {\r\n        this.errors = {};\r\n\r\n        //Metadata TODO: add all metadata checks\r\n        if (!column.hasOwnProperty('key')) {\r\n            this.errors.column = \"'key' attribute not present.\";\r\n        }\r\n        else {\r\n            if (column.key !== true) {\r\n                this.errors.column = \"'key' is not true.\";\r\n            }\r\n        }\r\n\r\n        if (!column.hasOwnProperty('dataType')) {\r\n            this.errors.column = \"'dataType' attribute not present.\";\r\n        }\r\n        else {\r\n            if (column.dataType !== 'code') {\r\n                this.errors.column = \"'dataType' attribute is not a coding system.\";\r\n            }\r\n        }\r\n\r\n        // TODO: check domain and referencearea if needed\r\n\r\n        return (Object.keys(this.errors).length === 0);\r\n    };\r\n\r\n    return MapCreator;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/index.js\n ** module id = 1\n ** module chunks = 0\n **/","define(function () {\r\n\r\n    'use strict';\r\n\r\n    return {\r\n        WMS_URL: \"http://fenix.fao.org/demo/fenix/geoserver\",\r\n        DEFAULT_WMS_SERVER: \"http://fenix.fao.org/demo/fenix/geoserver\",\r\n        url: {\r\n            wms: \"http://fenix.fao.org/demo/fenix/geoserver\"\r\n        },        \r\n        fenix_ui_map: {\r\n            plugins: {\r\n                disclaimerfao: true,\r\n                geosearch: true,\r\n                mouseposition: false,\r\n                controlloading : true,\r\n                zoomcontrol: 'bottomright'\r\n            },\r\n            guiController: {\r\n                overlay: false,\r\n                baselayer: true,\r\n                wmsLoader: false\r\n            },\r\n            gui: {\r\n                disclaimerfao: true\r\n            }\r\n        },\r\n        leaflet: {\r\n            zoomControl: false,\r\n            attributionControl: false,\r\n            minZoom: 1\r\n        },\r\n        layers: {\r\n            gaul0: {\r\n                layers: 'fenix:gaul0_3857',\r\n                urlWMS: 'http://fenix.fao.org/demo/fenix/geoserver',\r\n                opacity: '0.9',\r\n                joincolumn: 'adm0_code',\r\n                joincolumnlabel: 'areanamee',\r\n                layertype: 'JOIN',\r\n                jointype: 'shaded',\r\n                openlegend: true,\r\n                defaultgfi: true,\r\n                colorramp: 'YlGn',\r\n                lang: 'en'\r\n            }\r\n        },\r\n        geoSubject: 'geo',\r\n        colorRamp: 'Reds',  //Blues, Greens,\r\n        //colorRamp values: http://fenixrepo.fao.org/cdn/fenix/fenix-ui-map-datasets/colorramp.png        \r\n\r\n        valueSubject: 'value',\r\n        // measurement unit\r\n        muSubject: null,\r\n\r\n        // Mapping with the\r\n        join: {\r\n            style: {\r\n                layertype: 'JOIN',\r\n                jointype: 'shaded',\r\n                defaultgfi: true,\r\n                openlegend: true,\r\n                lang: 'EN',\r\n                opacity: '0.7',\r\n                colorramp: 'Greens',\r\n                decimalvalues: 2\r\n            },\r\n            layerMapping: {\r\n                escap_area: {\r\n                    layers: 'fenix:gaul0_3857',\r\n                    joincolumn: 'adm0_code',\r\n                    joincolumnlabel: 'adm0_name'\r\n                },\r\n                gaul0: {\r\n                    layers: 'fenix:gaul0_3857',\r\n                    joincolumn: 'adm0_code',\r\n                    joincolumnlabel: 'adm0_name'\r\n                },\r\n                gaul1: {\r\n                    layers: 'fenix:gaul1_3857',\r\n                    joincolumn: 'adm1_code',\r\n                    joincolumnlabel: 'adm1_name'\r\n                },\r\n                uae_gaul: {\r\n                    layers: 'fenix:gaul1_3857',\r\n                    joincolumn: 'adm1_code',\r\n                    joincolumnlabel: 'adm1_name'\r\n                },\r\n\r\n                gaul_adm1: {\r\n                    layers: 'fenix:gaul1_3857',\r\n                    joincolumn: 'adm1_code',\r\n                    joincolumnlabel: 'adm1_name'\r\n                },\r\n\r\n                faostat_countrycodes: {\r\n                    layers: 'fenix:gaul0_faostat_3857',\r\n                    joincolumn: 'faost_code',\r\n                    joincolumnlabel: 'areanamee',\r\n                },\r\n                faostat_countries: {\r\n                    layers: 'fenix:gaul0_faostat_3857',\r\n                    joincolumn: 'faost_code',\r\n                    joincolumnlabel: 'areanamee',\r\n                },\r\n                gaul: {\r\n                    layers: 'fenix:gaul1_3857',\r\n                    joincolumn: 'adm1_code',\r\n                    joincolumnlabel: 'adm1_name'\r\n                },\r\n                uneca_partner: {\r\n                    layers: 'fenix:gaul0_faostat3_3857',\r\n                    joincolumn: 'iso3',\r\n                    joincolumnlabel: 'areanamee'\r\n                },\r\n                gaul1_afg: {\r\n                    layers: 'fenix:gaul1_3857',\r\n                    joincolumn: 'adm1_code',\r\n                    joincolumnlabel: 'adm1_name'\r\n                },\r\n                iso3: {\r\n                    layers: 'fenix:gaul0_faostat3_3857',\r\n                    joincolumn: 'iso3',\r\n                    joincolumnlabel: 'areanamee'\r\n                },\r\n                uneca_iso3: {\r\n                    layers: 'fenix:gaul0_faostat3_3857',\r\n                    joincolumn: 'iso3',\r\n                    joincolumnlabel: 'areanamee'\r\n                }\r\n            }\r\n        }\r\n        // TODO: add boundaries option\r\n    };\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/config/config.js\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"loglevel\"\n ** module id = 4\n ** module chunks = 0\n **/","define(function () {\r\n\r\n    'use strict';\r\n\r\n    return {\r\n\r\n        MISSING_CONTAINER: 'missing_container'\r\n\r\n    };\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/config/errors.js\n ** module id = 5\n ** module chunks = 0\n **/","define(function () {\r\n\r\n    'use strict';\r\n\r\n    return {\r\n\r\n        WINDOW_RESIZE: 'fs.window.resize.event'\r\n\r\n    };\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/config/events.js\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"underscore\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fenix-ui-map\"\n ** module id = 8\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fenix-ui-pivotator\"\n ** module id = 9\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fenix-ui-pivotator-utils\"\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"amplify-pubsub\"\n ** module id = 11\n ** module chunks = 0\n **/"],"sourceRoot":""}